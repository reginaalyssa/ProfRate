<p id="notice"><%= notice %></p>

<%= link_to 'Add Course', new_course_path(professor_id: @professor.id) %>

<p>
  <strong>First name:</strong>
  <%= @professor.first_name %>
</p>

<p>
  <strong>Last name:</strong>
  <%= @professor.last_name %>
</p>

<% if @courses %>
    <table>
      <thead>
      <tr>
        <th>Course</th>
        <th>Rating</th>
      </tr>
      </thead>

      <tbody>
      <% @courses.zip(@course_professor_association) do |course, association| %>
          <tr>
            <td><%= link_to course.title, reviews_professors_path(@professor.id, course.id) %></td>
            <td>
              <% if association.average_rating.nil? %>
                  No reviews yet
              <% else %>
                  <%= association.formatted_average_rating %>
              <% end %>
            </td>
          </tr>
      <% end %>
      </tbody>
    </table>
<% end %>

<% if !@other_courses.empty? %>
    <%= form_for :add_course, url: add_course_professors_path do |form| %>
        <%= form.select :course_id, @other_courses.collect { |course| [course.title, course.id] } %>
        <%= form.hidden_field :professor_id, :value => @professor.id %>
        <%= form.submit "Add Course" %>
    <% end %>
<% end %>

<%= link_to 'Back', professors_path %>
